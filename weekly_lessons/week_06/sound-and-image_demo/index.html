<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- CDN Link for p5js -->
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.8/lib/p5.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.8/lib/addons/p5.sound.min.js"></script>
    <!-- Fallback loader -->
    <script>
      // If p5 didn't load (e.g., offline), load local fallback
      window.addEventListener(
        "error",
        function (e) {
          if (e.target.tagName === "SCRIPT" && e.target.src.includes("p5")) {
            console.warn("CDN failed — loading local p5 fallback.");
            loadLocal();
          }
        },
        true
      );

      // Safety check: if p5 still undefined after load, load local fallback
      window.addEventListener("load", function () {
        if (typeof window.p5 === "undefined") {
          console.warn("p5 not found — loading local fallback.");
          loadLocal();
        }
      });

      function loadLocal() {
        const libs = [
          "/weekly_lessons/libraries/p5.min.js",
          "/weekly_lessons/libraries/p5.sound.min.js",
        ];
        libs.forEach((src) => {
          const s = document.createElement("script");
          s.src = src;
          document.head.appendChild(s);
        });
      }
    </script>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <meta charset="utf-8" />
  </head>
  <body>
    <main></main>
    <script src="sketch.js"></script>
  </body>
</html>
